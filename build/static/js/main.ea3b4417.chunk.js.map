{"version":3,"sources":["components/SearchSuggest.js","history.js","components/Home.js","components/Summary.js","components/Histogram.js","components/Linechart.js","components/ScatterPlot.js","components/QueryResults.js","components/MinSearch.js","components/Search.js","App.js","index.js"],"names":["languages","createBrowserHistory","getSuggestions","value","escapedValue","trim","replace","regex","RegExp","filter","language","test","tag","slice","getSuggestionValue","suggestion","renderSuggestion","a","axios","get","process","res","fetchTags","then","data","SearchSuggest","onChange","event","newValue","method","setState","changeParent","onSuggestionsFetchRequested","suggestions","onSuggestionsClearRequested","onSuggestionSelected","history","push","window","location","reload","state","this","inputProps","React","Component","Home","query","setQuery","classes","useState","listingCount","setListingCount","lastUpdate","setLastUpdate","fetchMeta","count","lastUD","useEffect","className","Container","Grid","container","spacing","item","id","xs","align","to","style","textDecoration","Button","variant","color","type","onClick","alert","created","summaryStyle","fontFamily","Summary","memo","phones","execQuery","length","meanBy","Math","min","p","price","map","max","Histogram","containerComponent","labels","datum","round","x","y","theme","VictoryTheme","material","height","animate","duration","label","axisLabelComponent","dy","dependentAxis","Linechart","pricedPhones","dateAxis","Date","time_stamp","prices","zip","dp","scale","ScatterPlot","b","getTime","now","Array","fill","listingAge","e","i","size","QueryResults","sm","Paper","paper","elevation","CircularProgress","MinSearch","fetchPhones","onSubmit","InputBase","target","Search","setPhones","useHistory","useParams","preventDefault","useStyles","makeStyles","root","flexGrow","padding","textAlign","palette","text","primary","searchbar","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea3b4417.chunk.js","sourcesContent":["import React from 'react'\r\nimport Autosuggest from 'react-autosuggest';\r\nimport axios from 'axios'\r\nimport history from '../history'\r\n\r\nconst fetchTags = async () => {\r\n    const res = await axios.get(`${process.env.REACT_APP_BASE_URL}/tags`) \r\n    return res\r\n}\r\n\r\nlet languages\r\nfetchTags().then(res => languages = res.data)\r\n  \r\n  // https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions#Using_Special_Characters\r\n  function escapeRegexCharacters(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n  }\r\n  \r\n  function getSuggestions(value) {\r\n    const escapedValue = escapeRegexCharacters(value.trim());\r\n    \r\n    if (escapedValue === '') {\r\n      return [];\r\n    }\r\n  \r\n    const regex = new RegExp('^' + escapedValue, 'i');\r\n    return languages.filter(language => regex.test(language.tag)).slice(0, 10);\r\n  }\r\n  \r\n  function getSuggestionValue(suggestion) {\r\n    return suggestion.tag;\r\n  }\r\n  \r\n  function renderSuggestion(suggestion) {\r\n    return (\r\n      <span>{suggestion.tag}</span>\r\n    );\r\n  }\r\n  \r\n  class SearchSuggest extends React.Component {\r\n    constructor({ onChange }) {\r\n      super();\r\n  \r\n      this.state = {\r\n        value: '',\r\n        suggestions: []\r\n      };\r\n      this.changeParent = onChange\r\n    }\r\n\r\n    onChange = (event, { newValue, method }) => {\r\n      this.setState({\r\n        value: newValue\r\n      });\r\n      this.changeParent(newValue)\r\n    };\r\n    \r\n    onSuggestionsFetchRequested = ({ value }) => {\r\n      this.setState({\r\n        suggestions: getSuggestions(value)\r\n      });\r\n    };\r\n  \r\n    onSuggestionsClearRequested = () => {\r\n      this.setState({\r\n        suggestions: []\r\n      });\r\n    };\r\n\r\n    onSuggestionSelected = (event, { suggestion, method }) => {\r\n      if (method === 'enter') {\r\n        history.push(`/search/${suggestion.tag}`)\r\n        window.location.reload()\r\n      }\r\n    }\r\n  \r\n    render() {\r\n      const { value, suggestions } = this.state;\r\n      const inputProps = {\r\n        value,\r\n        onChange: this.onChange\r\n      };\r\n  \r\n      return (\r\n        <Autosuggest \r\n          suggestions={suggestions}\r\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\r\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested}\r\n          onSuggestionSelected={this.onSuggestionSelected}\r\n          getSuggestionValue={getSuggestionValue}\r\n          renderSuggestion={renderSuggestion}\r\n          inputProps={inputProps} />\r\n      );\r\n    }\r\n  }\r\n\r\nexport default SearchSuggest","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory();\r\n","import React, { useEffect, useState } from 'react'\nimport { Container, Grid, Button } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchSuggest from './SearchSuggest';\nimport { Link } from 'react-router-dom'\nimport SearchIcon from '@material-ui/icons/Search';\nimport '../Styles.css'\nimport axios from 'axios'\n\nconst Home = ({ query, setQuery, classes }) => {\n  const [listingCount, setListingCount] = useState(null)\n  const [lastUpdate, setLastUpdate] = useState(null)\n\n  const fetchMeta = async (event) => {\n    const count = await axios.get(`${process.env.REACT_APP_BASE_URL}/count`)\n    const lastUD = await axios.get(`${process.env.REACT_APP_BASE_URL}/lastinsert`)\n    setListingCount(count.data)\n    setLastUpdate(lastUD.data)\n  }\n\n  useEffect(() => {\n    setQuery('')\n    fetchMeta()\n  }, [])\n\n  return (\n    <div className='home__body'>\n      <Container>\n        <Grid container spacing={3}>\n          <Grid item id=\"search-label\" xs={12} align='center'>\n            <h1>Käytettyjen puhelinten hintatiedot</h1>\n            Kokeile esim. hakuja: \"Samsung\", \"Huawei\", \"iPhone\"\n          </Grid>\n          <Grid item xs={12} align='center'>\n            <form>\n              <div className='search__input'>\n                <SearchIcon />\n                <SearchSuggest onChange={newValue => setQuery(newValue)}/>\n              </div>\n              <br />\n              <div className='search__buttons'>\n                <Link to={`/search/${query}`} style={{ textDecoration: 'none'}}>\n                  <Button id=\"search-button\" variant=\"contained\" color=\"primary\" type=\"submit\">Search</Button>\n                </Link>\n                <Button id=\"some-button\" variant=\"contained\" color=\"primary\" onClick={() => alert('Move along, nothing to see here.')}>UselessFeature</Button>\n              </div>\n            </form>\n          </Grid>\n          <Grid item xs={12} align='center'>\n            {\n              (listingCount && lastUpdate) &&\n              <>Tietokannassa {listingCount} kohdetta, päivitetty viimeksi: {lastUpdate.created}</>\n            }\n          </Grid>\n        </Grid>\n      </Container>\n    </div>\n  )\n}\n\nexport default Home;\n","import React from 'react'\r\nimport meanBy from 'lodash.meanby'\r\n\r\nconst summaryStyle = {\r\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"\r\n}\r\n\r\nconst Summary = React.memo(({ phones, execQuery }) => {\r\n    if (!phones) {\r\n        return <div>Loading...</div>\r\n    }\r\n    return (\r\n        <div style={summaryStyle}>\r\n            <h3>Summary: {execQuery} </h3>\r\n            { phones.length >= 250\r\n                ? <p>Count: {phones.length}+</p>\r\n                : <p>Count: {phones.length}</p>\r\n            }\r\n            <p>Mean Price: {meanBy(phones, 'price')}</p>\r\n            <p>Min Price: {Math.min( ...phones.filter(p => p.price).map(p => p.price) )}</p>\r\n            <p>Max Price: {Math.max( ...phones.filter(p => p.price).map(p => p.price) )}</p>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default Summary","import React from 'react'\r\nimport { VictoryChart, VictoryHistogram, VictoryVoronoiContainer, VictoryAxis, VictoryTheme, VictoryLabel } from 'victory' \r\n\r\nconst Histogram = ({ phones }) => {\r\n\r\n    if (!phones) {\r\n        return <div>Loading...</div>\r\n    }\r\n    \r\n    const labels = ({ datum }) => (\r\n        `${Math.round(datum.x, 2)}, ${Math.round(datum.y, 2)}`\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <VictoryChart \r\n                containerComponent={<VictoryVoronoiContainer labels={labels}/>}\r\n                theme={VictoryTheme.material}\r\n                height={250}\r\n                animate={{\r\n                    duration: 1500\r\n                  }}\r\n            >\r\n                <VictoryAxis label='Price (eur)' axisLabelComponent={<VictoryLabel dy={25} />}/>\r\n                <VictoryAxis dependentAxis />\r\n                <VictoryHistogram data={phones.map(p => ({x : p.price}) )}/>\r\n            </VictoryChart>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Histogram","import React from 'react'\r\nimport { VictoryChart, VictoryLine, VictoryVoronoiContainer, VictoryAxis, VictoryLabel, VictoryTheme } from 'victory'\r\nimport zip from 'lodash.zip'\r\n\r\nconst labels = ({ datum }) => (\r\n    `${Math.round(datum.x, 2)}, ${Math.round(datum.y, 2)}`\r\n)\r\n\r\nconst Linechart = ({ phones }) => {\r\n    if (!phones) {\r\n        return <div>Loading...</div>\r\n    }\r\n    const pricedPhones = phones.filter(p => p.price)\r\n    const dateAxis = pricedPhones.map(p => new Date(p.time_stamp))\r\n\r\n    const prices = pricedPhones.map(p => p.price)\r\n    const data = zip(dateAxis, prices).map(dp => ({x: dp[0], y: dp[1] }))\r\n\r\n    return (\r\n        <div>\r\n            <VictoryChart \r\n                scale={{ x: \"time\"}} \r\n                containerComponent={<VictoryVoronoiContainer labels={labels}/>}\r\n                theme={VictoryTheme.material}\r\n                height={250}\r\n                animate={{\r\n                    duration: 1500\r\n                  }}\r\n            >\r\n                <VictoryAxis label='Listing date' axisLabelComponent={<VictoryLabel dy={25} />}/>\r\n                <VictoryAxis dependentAxis />\r\n                <VictoryLine data={data}/>\r\n            </VictoryChart>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Linechart","import React from 'react'\r\nimport { VictoryChart, VictoryTheme, VictoryScatter, VictoryAxis, VictoryLabel } from 'victory'\r\nimport zip from 'lodash.zip'\r\n\r\nconst ScatterPlot = ({ phones }) => {\r\n    if (!phones) {\r\n        return <div>Loading...</div>\r\n    }\r\n    const pricedPhones = phones.filter(p => p.price)\r\n\r\n    const subtractVectors = (a,b) => {\r\n        return a.map((e,i) => e - b[i]);\r\n    }\r\n\r\n    //days since 1-1-1970\r\n    const dateAxis = pricedPhones.map(p => new Date(p.time_stamp).getTime() / 86400000)\r\n\r\n    const now = new Array(dateAxis.length).fill(new Date().getTime() / 86400000)\r\n    //time diff in days\r\n    const listingAge = subtractVectors(now, dateAxis)\r\n    const prices = pricedPhones.map(p => p.price)\r\n\r\n    const data = zip(listingAge, prices).map(dp => ({x: dp[0], y: dp[1] }))\r\n    \r\n    return <VictoryChart\r\n        theme={VictoryTheme.material}\r\n        height={250}\r\n     >\r\n      <VictoryAxis \r\n        label='Listing age (d)'\r\n        axisLabelComponent={<VictoryLabel dy={25} />}\r\n      />\r\n      <VictoryAxis dependentAxis /> \r\n\r\n      <VictoryScatter\r\n        size={2}\r\n        data={data}\r\n\r\n      />\r\n  </VictoryChart>\r\n}\r\n\r\nexport default ScatterPlot\r\n","import React from 'react'\r\nimport Summary from './Summary'\r\nimport Histogram from './Histogram'\r\nimport Linechart from './Linechart'\r\nimport ScatterPlot from './ScatterPlot'\r\nimport { Grid, Paper, CircularProgress } from '@material-ui/core'\r\n\r\nconst QueryResults = React.memo(({ classes, phones, execQuery }) => {\r\n  if (!phones) {\r\n    return <>\r\n      <Grid item xs={12}>\r\n        <CircularProgress />\r\n      </Grid>\r\n    </>\r\n  }\r\n  return (\r\n    <>\r\n      <Grid item sm={6} xs={12}>\r\n        <Paper className={classes.paper} elevation={3}>\r\n          <Summary phones={phones} execQuery={execQuery}/>\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item sm={6} xs={12}>\r\n        <Paper className={classes.paper} elevation={3}>\r\n          <Histogram phones={phones} />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item sm={6} xs={12}>\r\n        <Paper className={classes.paper} elevation={3}>\r\n          <Linechart phones={phones} />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item sm={6} xs={12}>\r\n        <Paper className={classes.paper} elevation={3}>\r\n          <ScatterPlot phones={phones} />\r\n        </Paper>\r\n      </Grid>\r\n    </>\r\n  )\r\n})\r\n\r\nexport default QueryResults\r\n","import React from 'react'\nimport '../Styles.css'\nimport { Grid, Button } from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport InputBase from '@material-ui/core/InputBase';\n\nconst MinSearch = ({ query, setQuery, fetchPhones, phones }) => {\n  return (\n    <Grid item xs={12} align='left'>\n        <form onSubmit={fetchPhones}>\n        <span className='search__input__inline'>\n          <InputBase\n            id=\"outlined-search\"\n            label=\"Search\"\n            type=\"search\"\n            variant=\"outlined\"\n            value={query}\n            onChange={event => setQuery(event.target.value)}\n          />\n        </span>\n        <span className='search__buttons__inline'>\n          <Link to={`/search/${query}`} style={{ textDecoration: 'none'}}>\n            <Button id=\"search-button\" variant=\"contained\" color=\"primary\" type=\"submit\">Search</Button>\n          </Link>\n        </span>\n        </form>\n    </Grid>\n\n  )\n}\n\nexport default MinSearch","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport QueryResults from './QueryResults'\nimport { Container, Grid } from '@material-ui/core'\nimport MinSearch from './MinSearch'\nimport { useHistory, useParams } from 'react-router-dom'\n\nconst Search = ({ query, setQuery, classes }) => {\n  const [phones, setPhones] = useState(null)\n  const history = useHistory()\n  const execQuery = useParams().query\n\n  const fetchPhones = async (event) => {\n    //console.log(history)\n    if (event) {\n      event.preventDefault()\n    }\n    const res = await axios.get(`${process.env.REACT_APP_BASE_URL}/search/${execQuery}`)\n    setPhones(res.data)\n  }\n\n  useEffect(() => {\n    //console.log('fetching')\n    fetchPhones()\n    setQuery(execQuery)\n  }, [execQuery])\n\n  return (\n    <Container>\n      <Grid container spacing={3}>\n        <MinSearch query={query} setQuery={setQuery} phones={phones} fetchPhones={fetchPhones}/>\n        <QueryResults execQuery={execQuery} phones={phones} classes={classes} />\n      </Grid>\n    </Container>\n  )\n}\n\nexport default Search","import React, { useState } from 'react'\nimport Home from './components/Home'\nimport Search from './components/Search'\nimport SearchSuggest from \"./components/SearchSuggest\";\nimport { makeStyles } from '@material-ui/core/styles'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.primary,\n    height: '90%'\n  },\n  searchbar: {\n    align: 'center'\n  }\n}));\n\nconst App = () => {\n  const [query, setQuery] = useState('')\n  const classes = useStyles();\n\n  return (\n    <Router>\n    <Switch>\n      <Route path=\"/search/:query\">\n        <Search query={query} setQuery={setQuery} classes={classes} />\n      </Route>\n      <Route path=\"/suggest\">\n        <SearchSuggest></SearchSuggest>\n      </Route>\n      <Route path=\"/\">\n        <Home query={query} setQuery={setQuery} classes={classes} />\n      </Route>\n\n    </Switch>\n  </Router>\n  )\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}